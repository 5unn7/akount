{
  "sessionId": "session-1772299982821",
  "timestamp": "2026-02-28T17:33:02.821Z",
  "commitCount": 16,
  "commitRange": "4480332..5e1f24a",
  "patterns": [
    {
      "type": "cross-domain",
      "description": "Commit touches 4 domains: ai, business, clients, invoicing",
      "domains": [
        "ai",
        "business",
        "clients",
        "invoicing"
      ],
      "files": [
        "apps/api/src/domains/ai/services/ai-decision-log.service.ts",
        "apps/api/src/domains/ai/services/anomaly-detection.service.ts",
        "apps/api/src/domains/ai/services/document-extraction.service.ts",
        "apps/api/src/domains/ai/services/providers/mistral.provider.ts",
        "apps/api/src/domains/business/routes.ts",
        "apps/api/src/domains/clients/routes/clients.ts",
        "apps/api/src/domains/clients/services/client.service.ts",
        "apps/api/src/domains/invoicing/routes/credit-notes.ts",
        "apps/api/src/domains/invoicing/routes/invoices.ts",
        "apps/api/src/domains/invoicing/schemas/credit-note.schema.ts",
        "apps/api/src/domains/invoicing/services/credit-note.service.ts",
        "apps/api/src/domains/invoicing/services/invoice.service.ts"
      ],
      "confidence": 0.9,
      "commit": "5e1f24a",
      "message": "refactor: Comprehensive .claude/ folder reorganization (Phases 1-2)"
    },
    {
      "type": "new-utility",
      "description": "New utility added: tax",
      "files": [
        "apps/web/src/lib/utils/tax.ts"
      ],
      "exports": [
        "formatTaxRate",
        "percentToBasisPoints",
        "basisPointsToPercent"
      ],
      "confidence": 1,
      "commit": "5e1f24a",
      "message": "refactor: Comprehensive .claude/ folder reorganization (Phases 1-2)"
    },
    {
      "type": "new-component",
      "description": "New shared component: CreditNoteStatusBadge",
      "files": [
        "packages/ui/src/business/CreditNoteStatusBadge.tsx"
      ],
      "confidence": 0.95,
      "commit": "5e1f24a",
      "message": "refactor: Comprehensive .claude/ folder reorganization (Phases 1-2)"
    },
    {
      "type": "bug-fix",
      "description": "refactor: Comprehensive .claude/ folder reorganization (Phases 1-2)",
      "files": [
        ".claude/.code-index-state.json",
        ".claude/.session-context.log",
        ".claude/.task-blame-cache.json",
        ".claude/CODEBASE-ACCOUNTING.md",
        ".claude/CODEBASE-AI.md",
        ".claude/CODEBASE-BANKING.md",
        ".claude/CODEBASE-INVOICING.md",
        ".claude/CODEBASE-PACKAGES.md",
        ".claude/CODEBASE-PLANNING.md",
        ".claude/CODEBASE-WEB-BUSINESS.md",
        ".claude/CODEBASE-WEB-FORMS.md",
        ".claude/CODEBASE-WEB-PAGES.md",
        ".claude/CODEBASE-WEB-SHARED.md",
        ".claude/agents/README.md",
        ".claude/agents/api-agent.md",
        ".claude/agents/banking-agent.md",
        ".claude/agents/compliance-agent.md",
        ".claude/agents/db-agent.md",
        ".claude/agents/domain/api-agent.md",
        ".claude/agents/domain/banking-agent.md",
        ".claude/agents/domain/compliance-agent.md",
        ".claude/agents/domain/db-agent.md",
        ".claude/agents/domain/security-agent.md",
        ".claude/agents/domain/test-agent.md",
        ".claude/agents/domain/ui-agent.md",
        ".claude/agents/domain/web-agent.md",
        ".claude/agents/security-agent.md",
        ".claude/agents/test-agent.md",
        ".claude/agents/ui-agent.md",
        ".claude/agents/web-agent.md",
        ".claude/config/domain-adjacency.v1.OLD.json",
        ".claude/config/facts.json",
        ".claude/config/session-patterns.json",
        ".claude/config/settings.local.json",
        ".claude/domain-adjacency-v2.json",
        ".claude/domain-adjacency.json",
        ".claude/facts.json",
        ".claude/linear-api-usage.log",
        ".claude/linear-automation-configs.json",
        ".claude/linear-sync-state.json",
        ".claude/scripts/README.md",
        ".claude/scripts/add-production-signal.js",
        ".claude/scripts/archive-done-tasks.js",
        ".claude/scripts/archived/spike-code-index/spike-code-index-compressed.js",
        ".claude/scripts/archived/spike-code-index/spike-code-index-compressed.json",
        ".claude/scripts/archived/spike-code-index/spike-code-index-readable.js",
        ".claude/scripts/archived/spike-code-index/spike-code-index-readable.json",
        ".claude/scripts/archived/spike-code-index/spike-code-index.js",
        ".claude/scripts/archived/spike-code-index/spike-code-index.json",
        ".claude/scripts/build-export-cache.js",
        ".claude/scripts/check-context-freshness.js",
        ".claude/scripts/check-index-freshness.js",
        ".claude/scripts/cost-dashboard.sh",
        ".claude/scripts/count-tasks.js",
        ".claude/scripts/detect-violations.js",
        ".claude/scripts/diagnose-env.js",
        ".claude/scripts/enrich-task.js",
        ".claude/scripts/export-tasks-csv.ts",
        ".claude/scripts/extract-review-learnings.js",
        ".claude/scripts/extract-session-patterns.js",
        ".claude/scripts/init-task-counters.js",
        ".claude/scripts/lib/load-enrichments.js",
        ".claude/scripts/lib/project-root.js",
        ".claude/scripts/linear-advanced-setup.ts",
        ".claude/scripts/linear-analyze-states.ts",
        ".claude/scripts/linear-api-monitor.ts",
        ".claude/scripts/linear-cleanup-duplicate-states.ts",
        ".claude/scripts/linear-create-projects.ts",
        ".claude/scripts/linear-custom-fields.ts",
        ".claude/scripts/linear-duplicate-check.ts",
        ".claude/scripts/linear-generate-automation-configs.ts",
        ".claude/scripts/linear-import-all-tasks.ts",
        ".claude/scripts/linear-import-comprehensive.ts",
        ".claude/scripts/linear-import-quick.ts",
        ".claude/scripts/linear-import-robust.ts",
        ".claude/scripts/linear-import-simple.ts",
        ".claude/scripts/linear-inspect-workspace.ts",
        ".claude/scripts/linear-setup-workspace.ts",
        ".claude/scripts/linear-sync.ts",
        ".claude/scripts/linear-weekly-report.ts",
        ".claude/scripts/linear-workspace-audit.ts",
        ".claude/scripts/load-code-index.js",
        ".claude/scripts/log-tool-call.sh",
        ".claude/scripts/node/analysis/detect-violations.js",
        ".claude/scripts/node/analysis/extract-review-learnings.js",
        ".claude/scripts/node/analysis/extract-session-patterns.js",
        ".claude/scripts/node/analysis/session-diff.js",
        ".claude/scripts/node/analysis/verify-import.js",
        ".claude/scripts/node/index-builders/build-export-cache.js",
        ".claude/scripts/node/index-builders/check-index-freshness.js",
        ".claude/scripts/node/index-builders/load-code-index.js",
        ".claude/scripts/node/index-builders/regenerate-code-index.js",
        ".claude/scripts/node/index-builders/regenerate-decision-index.js",
        ".claude/scripts/node/index-builders/regenerate-task-index.js",
        ".claude/scripts/node/metrics/cost-dashboard.sh",
        ".claude/scripts/node/metrics/runtime-summary.js",
        ".claude/scripts/node/metrics/track-session-cost.js",
        ".claude/scripts/node/misc/add-production-signal.js",
        ".claude/scripts/node/misc/export-tasks-csv.ts",
        ".claude/scripts/node/misc/read-production-signals.js",
        ".claude/scripts/node/misc/route-to-memory.js",
        ".claude/scripts/node/misc/tasks-to-github-issues.ts",
        ".claude/scripts/node/task-utils/archive-done-tasks.js",
        ".claude/scripts/node/task-utils/count-tasks.js",
        ".claude/scripts/node/task-utils/enrich-task.js",
        ".claude/scripts/node/task-utils/init-task-counters.js",
        ".claude/scripts/node/task-utils/reorganize-tasks.js",
        ".claude/scripts/node/task-utils/reserve-task-ids.js",
        ".claude/scripts/node/task-utils/score-task-risk.js",
        ".claude/scripts/node/task-utils/split-task-enrichments.js",
        ".claude/scripts/node/task-utils/task-claim.js",
        ".claude/scripts/prisma-migrate.sh",
        ".claude/scripts/read-production-signals.js",
        ".claude/scripts/regenerate-code-index.js",
        ".claude/scripts/regenerate-decision-index.js",
        ".claude/scripts/regenerate-task-index.js",
        ".claude/scripts/reorganize-tasks.js",
        ".claude/scripts/reserve-task-ids.js",
        ".claude/scripts/route-to-memory.js",
        ".claude/scripts/runtime-summary.js",
        ".claude/scripts/score-task-risk.js",
        ".claude/scripts/session-diff.js",
        ".claude/scripts/shell/dev/diagnose-env.js",
        ".claude/scripts/shell/dev/prisma-migrate.sh",
        ".claude/scripts/shell/dev/test-env.js",
        ".claude/scripts/shell/git/worktree-cleanup.sh",
        ".claude/scripts/shell/git/worktree-create.sh",
        ".claude/scripts/shell/git/worktree-status.sh",
        ".claude/scripts/shell/utils/check-context-freshness.js",
        ".claude/scripts/shell/utils/log-tool-call.sh",
        ".claude/scripts/shell/utils/update-metrics.sh",
        ".claude/scripts/spike-code-index-compressed.js",
        ".claude/scripts/spike-code-index-compressed.json",
        ".claude/scripts/spike-code-index-readable.js",
        ".claude/scripts/spike-code-index-readable.json",
        ".claude/scripts/spike-code-index.js",
        ".claude/scripts/spike-code-index.json",
        ".claude/scripts/task-claim.js",
        ".claude/scripts/tasks-to-github-issues.ts",
        ".claude/scripts/test-env.js",
        ".claude/scripts/track-session-cost.js",
        ".claude/scripts/update-metrics.sh",
        ".claude/scripts/verify-import.js",
        ".claude/scripts/worktree-cleanup.sh",
        ".claude/scripts/worktree-create.sh",
        ".claude/scripts/worktree-status.sh",
        ".claude/session-cost.json",
        ".claude/session-patterns.json",
        ".claude/state/.code-index-state.json",
        ".claude/state/.session-context.log",
        ".claude/state/.task-blame-cache.json",
        ".claude/state/.task-id-counters.json",
        ".claude/state/session-cost.json",
        ".claude/state/task-claims.json",
        ".claude/state/task-enrichments.OLD.json",
        ".claude/state/task-enrichments/accounting.json",
        ".claude/state/task-enrichments/ai.json",
        ".claude/state/task-enrichments/banking.json",
        ".claude/state/task-enrichments/cross-cutting.json",
        ".claude/state/task-enrichments/index.json",
        ".claude/state/task-enrichments/invoicing.json",
        ".claude/state/task-enrichments/planning.json",
        ".claude/state/task-enrichments/web.json",
        ".claude/state/task-inbox.json",
        ".claude/state/task-outbox.json",
        ".claude/task-enrichments.json",
        ".claude/task-inbox.json",
        ".claude/task-outbox.json",
        "ACTIVE-WORK.md",
        "CODEBASE-ACCOUNTING.md",
        "CODEBASE-AI.md",
        "CODEBASE-BANKING.md",
        "CODEBASE-INVOICING.md",
        "CODEBASE-PACKAGES.md",
        "CODEBASE-PLANNING.md",
        "CODEBASE-WEB-BUSINESS.md",
        "CODEBASE-WEB-FORMS.md",
        "CODEBASE-WEB-PAGES.md",
        "CODEBASE-WEB-SHARED.md",
        "TASKS-ARCHIVE.md",
        "TASKS.md",
        "apps/api/src/domains/ai/services/ai-decision-log.service.ts",
        "apps/api/src/domains/ai/services/anomaly-detection.service.ts",
        "apps/api/src/domains/ai/services/document-extraction.service.ts",
        "apps/api/src/domains/ai/services/providers/mistral.provider.ts",
        "apps/api/src/domains/business/routes.ts",
        "apps/api/src/domains/clients/routes/clients.ts",
        "apps/api/src/domains/clients/services/client.service.ts",
        "apps/api/src/domains/invoicing/routes/credit-notes.ts",
        "apps/api/src/domains/invoicing/routes/invoices.ts",
        "apps/api/src/domains/invoicing/schemas/credit-note.schema.ts",
        "apps/api/src/domains/invoicing/services/credit-note.service.ts",
        "apps/api/src/domains/invoicing/services/invoice.service.ts",
        "apps/web/src/app/(dashboard)/accounting/tax-rates/tax-rates-client.tsx",
        "apps/web/src/app/(dashboard)/accounting/tax-rates/tax-rates-empty.tsx",
        "apps/web/src/app/(dashboard)/business/actions.ts",
        "apps/web/src/app/(dashboard)/business/clients/clients-list-client.tsx",
        "apps/web/src/app/(dashboard)/business/credit-notes/[id]/error.tsx",
        "apps/web/src/app/(dashboard)/business/credit-notes/[id]/loading.tsx",
        "apps/web/src/app/(dashboard)/business/credit-notes/[id]/page.tsx",
        "apps/web/src/app/(dashboard)/business/credit-notes/credit-notes-list-client.tsx",
        "apps/web/src/app/(dashboard)/business/credit-notes/error.tsx",
        "apps/web/src/app/(dashboard)/business/credit-notes/loading.tsx",
        "apps/web/src/app/(dashboard)/business/credit-notes/page.tsx",
        "apps/web/src/app/(dashboard)/business/invoices/invoices-list-client.tsx",
        "apps/web/src/components/business/CreditNoteForm.tsx",
        "apps/web/src/components/business/CreditNoteTable.tsx",
        "apps/web/src/lib/api/credit-notes.ts",
        "apps/web/src/lib/api/export-client.ts",
        "apps/web/src/lib/utils/tax.ts",
        "docs/plans/2026-02-28-doc-intelligence-review-remediation.md",
        "docs/plans/2026-02-28-typescript-errors-root-cause-fixes.md",
        "docs/reviews/doc-intelligence-phase2-2026-02-28/SYNTHESIS.md",
        "docs/reviews/doc-intelligence-phase2-2026-02-28/agents/data-export-reviewer.md",
        "docs/reviews/doc-intelligence-phase2-2026-02-28/ai-integration-reviewer-p1-p2.md",
        "docs/reviews/doc-intelligence-phase2-2026-02-28/fastify-api-reviewer.md",
        "docs/reviews/doc-intelligence-phase2-2026-02-28/infrastructure-deployment-reviewer.md",
        "docs/reviews/doc-intelligence-phase2-2026-02-28/kieran-typescript-reviewer.md",
        "docs/reviews/doc-intelligence-phase2-2026-02-28/nextjs-app-router-reviewer.md",
        "docs/reviews/doc-intelligence-phase2-2026-02-28/performance-oracle.md",
        "docs/reviews/doc-intelligence-phase2-2026-02-28/prisma-migration-reviewer.md",
        "docs/reviews/doc-intelligence-phase2-2026-02-28/security-sentinel.md",
        "docs/reviews/document-intelligence-phase2-2026-02-28/code-simplicity-reviewer.md",
        "packages/db/CLAUDE.md",
        "packages/db/prisma/schema.prisma",
        "packages/ui/src/business/CreditNoteStatusBadge.tsx",
        "packages/ui/src/business/index.ts",
        "tasks.json"
      ],
      "confidence": 0.85,
      "commit": "5e1f24a",
      "message": "refactor: Comprehensive .claude/ folder reorganization (Phases 1-2)"
    },
    {
      "type": "schema-change",
      "description": "Added index/constraint, Added soft delete, Modified relations",
      "files": [
        "packages/db/prisma/schema.prisma"
      ],
      "confidence": 1,
      "commit": "5e1f24a",
      "message": "refactor: Comprehensive .claude/ folder reorganization (Phases 1-2)"
    },
    {
      "type": "bug-fix",
      "description": "feat(web): DEV-251 (C6) - Report Narration UI Component",
      "files": [
        "apps/web/src/app/(dashboard)/accounting/reports/profit-loss/pl-report-view.tsx",
        "apps/web/src/components/accounting/ReportNarration.tsx"
      ],
      "taskIds": "DEV-251",
      "confidence": 0.85,
      "commit": "c90d455",
      "message": "feat(web): DEV-251 (C6) - Report Narration UI Component"
    },
    {
      "type": "bug-fix",
      "description": "feat(ai): DEV-250 (C5) - Financial Report Narration Endpoint",
      "files": [
        "apps/api/src/domains/ai/routes.ts",
        "apps/api/src/domains/ai/routes/report-narration.routes.ts",
        "apps/api/src/domains/ai/services/__tests__/report-narration.service.test.ts",
        "apps/api/src/domains/ai/services/providers/claude.provider.ts",
        "apps/api/src/domains/ai/services/report-narration.service.ts"
      ],
      "taskIds": "DEV-250",
      "confidence": 0.85,
      "commit": "1173221",
      "message": "feat(ai): DEV-250 (C5) - Financial Report Narration Endpoint"
    },
    {
      "type": "new-tests",
      "description": "1 new test file(s) added",
      "files": [
        "apps/api/src/domains/ai/services/__tests__/report-narration.service.test.ts"
      ],
      "confidence": 1,
      "commit": "1173221",
      "message": "feat(ai): DEV-250 (C5) - Financial Report Narration Endpoint"
    },
    {
      "type": "new-component",
      "description": "New shared component: ADMTNotice",
      "files": [
        "apps/web/src/components/shared/ADMTNotice.tsx"
      ],
      "confidence": 0.95,
      "commit": "1732d4a",
      "message": "feat(compliance): DEV-262 - CCPA ADMT Pre-Use Notice"
    },
    {
      "type": "bug-fix",
      "description": "feat(compliance): DEV-262 - CCPA ADMT Pre-Use Notice",
      "files": [
        "apps/api/src/domains/system/routes/__tests__/ai-data-deletion.routes.test.ts",
        "apps/api/src/domains/system/routes/ai-data-deletion.routes.ts",
        "apps/web/src/components/shared/ADMTNotice.tsx"
      ],
      "taskIds": "DEV-262",
      "confidence": 0.85,
      "commit": "1732d4a",
      "message": "feat(compliance): DEV-262 - CCPA ADMT Pre-Use Notice"
    },
    {
      "type": "bug-fix",
      "description": "feat(api): SEC-36 - AI Data Retention Policies",
      "files": [
        "apps/api/src/domains/system/routes.ts",
        "apps/api/src/lib/__tests__/ai-data-retention.test.ts",
        "apps/api/src/lib/audit-retention.ts"
      ],
      "taskIds": "SEC-36",
      "confidence": 0.85,
      "commit": "5cfcc74",
      "message": "feat(api): SEC-36 - AI Data Retention Policies"
    },
    {
      "type": "new-tests",
      "description": "1 new test file(s) added",
      "files": [
        "apps/api/src/lib/__tests__/ai-data-retention.test.ts"
      ],
      "confidence": 1,
      "commit": "5cfcc74",
      "message": "feat(api): SEC-36 - AI Data Retention Policies"
    },
    {
      "type": "bug-fix",
      "description": "feat(api): SEC-35 - GDPR Right to Erasure (AI data deletion)",
      "files": [
        "apps/api/src/domains/system/routes.ts",
        "apps/api/src/domains/system/routes/__tests__/ai-data-deletion.routes.test.ts",
        "apps/api/src/domains/system/routes/ai-data-deletion.routes.ts",
        "apps/api/src/domains/system/services/__tests__/ai-data-deletion.service.test.ts",
        "apps/api/src/domains/system/services/ai-data-deletion.service.ts"
      ],
      "taskIds": "SEC-35",
      "confidence": 0.85,
      "commit": "fc1e1fd",
      "message": "feat(api): SEC-35 - GDPR Right to Erasure (AI data deletion)"
    },
    {
      "type": "new-tests",
      "description": "2 new test file(s) added",
      "files": [
        "apps/api/src/domains/system/routes/__tests__/ai-data-deletion.routes.test.ts",
        "apps/api/src/domains/system/services/__tests__/ai-data-deletion.service.test.ts"
      ],
      "confidence": 1,
      "commit": "fc1e1fd",
      "message": "feat(api): SEC-35 - GDPR Right to Erasure (AI data deletion)"
    },
    {
      "type": "bug-fix",
      "description": "feat(api): ARCH-17 — Migrate rate limiters to Redis-backed (multi-instance support)",
      "files": [
        "apps/api/src/domains/business/routes/bill-scan.ts",
        "apps/api/src/domains/business/routes/invoice-scan.ts",
        "apps/api/src/index.ts",
        "apps/api/src/lib/queue/__tests__/queue-manager.test.ts",
        "apps/api/src/lib/queue/queue-manager.ts",
        "apps/api/src/middleware/__tests__/rate-limit.test.ts",
        "apps/api/src/middleware/rate-limit.ts"
      ],
      "taskIds": "ARCH-17",
      "confidence": 0.85,
      "commit": "4480332",
      "message": "feat(api): ARCH-17 — Migrate rate limiters to Redis-backed (multi-instance support)"
    }
  ],
  "newExports": [
    "formatTaxRate",
    "percentToBasisPoints",
    "basisPointsToPercent"
  ],
  "schemaChanges": [
    {
      "description": "Added index/constraint, Added soft delete, Modified relations",
      "commit": "5e1f24a"
    }
  ]
}