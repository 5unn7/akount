<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Akount — Financial Clarity</title>
<style>
@import url('https://fonts.googleapis.com/css2?family=Newsreader:ital,opsz,wght@0,6..72,300;0,6..72,400;0,6..72,600;1,6..72,300;1,6..72,400&family=Manrope:wght@300;400;500;600;700&family=JetBrains+Mono:wght@300;400;500&display=swap');

*,*::before,*::after{margin:0;padding:0;box-sizing:border-box}

:root{
  --bg-deep:#07070C;--bg-surface:#0E0E16;--bg-elevated:#14141F;--bg-card:#111119;
  --glass-bg:rgba(255,255,255,0.03);--glass-bg-2:rgba(255,255,255,0.045);
  --glass-border:rgba(255,255,255,0.06);--glass-border-2:rgba(255,255,255,0.09);
  --glass-hover:rgba(255,255,255,0.06);
  --text-primary:#E8E8ED;--text-secondary:#8B8B9E;--text-muted:#55556A;--text-faint:#333345;
  --accent-teal:#4FD1C5;--accent-teal-dim:rgba(79,209,197,0.15);
  --accent-amber:#F6AD55;--accent-amber-dim:rgba(246,173,85,0.15);
  --accent-rose:#FC8181;--accent-rose-dim:rgba(252,129,129,0.12);
  --accent-green:#68D391;--accent-green-dim:rgba(104,211,145,0.12);
  --accent-purple:#B794F4;--accent-purple-dim:rgba(183,148,244,0.12);
  --accent-blue:#63B3ED;--accent-blue-dim:rgba(99,179,237,0.12);
  --r:16px;--r-sm:10px;--r-xs:6px;
  --sidebar-w:72px;
  --ease-out:cubic-bezier(0.16,1,0.3,1);--ease-in-out:cubic-bezier(0.4,0,0.2,1);
}

html{font-size:16px;-webkit-font-smoothing:antialiased}
body{background:var(--bg-deep);color:var(--text-primary);font-family:'Manrope',system-ui,sans-serif;min-height:100vh;overflow-x:hidden}
body::before{content:'';position:fixed;inset:0;background-image:url("data:image/svg+xml,%3Csvg viewBox='0 0 256 256' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='n'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.9' numOctaves='4' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23n)' opacity='0.03'/%3E%3C/svg%3E");pointer-events:none;z-index:0}

/* ═══ Layout ═══ */
.app{display:flex;min-height:100vh;position:relative;z-index:1}

/* ═══ Sidebar ═══ */
.sidebar{width:var(--sidebar-w);display:flex;flex-direction:column;align-items:center;padding:24px 0 16px;gap:4px;border-right:1px solid var(--glass-border);background:rgba(7,7,12,0.6);backdrop-filter:blur(20px);position:fixed;top:0;left:0;bottom:0;z-index:10}
.sidebar-logo{width:36px;height:36px;border-radius:10px;background:linear-gradient(135deg,var(--accent-teal),#319795);display:flex;align-items:center;justify-content:center;font-family:'Newsreader',serif;font-weight:600;font-size:18px;color:var(--bg-deep);margin-bottom:20px;cursor:pointer;transition:transform .2s}
.sidebar-logo:hover{transform:scale(1.08)}
.nav-group{display:flex;flex-direction:column;align-items:center;gap:4px;flex:1}
.nav-divider{width:28px;height:1px;background:var(--glass-border);margin:8px 0}
.domain-btn{width:44px;height:44px;border-radius:12px;border:none;background:transparent;color:var(--text-muted);cursor:pointer;display:flex;align-items:center;justify-content:center;position:relative;transition:all .25s var(--ease-in-out);font-size:18px}
.domain-btn:hover{background:var(--glass-hover);color:var(--text-secondary)}
.domain-btn.active{background:var(--accent-teal-dim);color:var(--accent-teal);box-shadow:0 0 20px rgba(79,209,197,0.08)}
.domain-btn .badge{position:absolute;top:5px;right:5px;min-width:16px;height:16px;padding:0 4px;border-radius:8px;background:var(--accent-amber);color:var(--bg-deep);font-size:9px;font-weight:700;display:flex;align-items:center;justify-content:center}
.domain-btn .ai-dot{position:absolute;top:7px;right:7px;width:8px;height:8px;border-radius:50%;background:var(--accent-teal);box-shadow:0 0 8px var(--accent-teal);animation:ai-pulse 3s ease-in-out infinite}
@keyframes ai-pulse{0%,100%{opacity:.6;box-shadow:0 0 4px var(--accent-teal)}50%{opacity:1;box-shadow:0 0 12px var(--accent-teal)}}
.domain-tip{position:absolute;left:58px;background:var(--bg-elevated);border:1px solid var(--glass-border-2);padding:6px 12px;border-radius:var(--r-xs);font-size:12px;font-weight:500;color:var(--text-primary);white-space:nowrap;opacity:0;pointer-events:none;transition:opacity .15s;z-index:20;box-shadow:0 4px 16px rgba(0,0,0,.4)}
.domain-btn:hover .domain-tip{opacity:1}
.sidebar-bottom{display:flex;flex-direction:column;align-items:center;gap:8px;padding-top:8px;border-top:1px solid var(--glass-border)}
.avatar{width:32px;height:32px;border-radius:10px;background:linear-gradient(135deg,#667eea,#764ba2);display:flex;align-items:center;justify-content:center;font-size:13px;font-weight:600;color:#fff;cursor:pointer;transition:transform .2s}
.avatar:hover{transform:scale(1.1)}

/* ═══ Main ═══ */
.main{flex:1;margin-left:var(--sidebar-w);min-height:100vh;position:relative}
.domain-view{padding:40px 56px 120px;max-width:920px;opacity:0;transform:translateY(12px);transition:opacity .4s var(--ease-out),transform .4s var(--ease-out);display:none}
.domain-view.active{display:block;opacity:1;transform:translateY(0)}

/* ═══ Greeting ═══ */
.greeting{margin-bottom:8px;font-family:'Newsreader',serif;font-size:1.6rem;font-weight:300;color:var(--text-secondary)}
.greeting strong{color:var(--text-primary);font-weight:400}
.greeting-date{font-size:13px;color:var(--text-muted);margin-bottom:40px;font-family:'JetBrains Mono',monospace}

/* ═══ Pulse ═══ */
.pulse-section{text-align:center;padding:32px 0 36px}
.pulse-orb-wrap{position:relative;width:72px;height:72px;margin:0 auto 28px}
.pulse-orb{width:72px;height:72px;border-radius:50%;background:radial-gradient(circle at 35% 35%,#7FEDD8,#4FD1C5,#2C9F94);box-shadow:0 0 40px rgba(79,209,197,.25),0 0 80px rgba(79,209,197,.08),inset 0 -4px 12px rgba(0,0,0,.2);animation:breathe 4s ease-in-out infinite}
.pulse-r1{position:absolute;inset:-10px;border-radius:50%;border:1px solid rgba(79,209,197,.12);animation:ring 4s ease-in-out infinite}
.pulse-r2{position:absolute;inset:-22px;border-radius:50%;border:1px solid rgba(79,209,197,.06);animation:ring 4s ease-in-out infinite .6s}
@keyframes breathe{0%,100%{transform:scale(1);box-shadow:0 0 40px rgba(79,209,197,.25),0 0 80px rgba(79,209,197,.08)}50%{transform:scale(1.07);box-shadow:0 0 60px rgba(79,209,197,.35),0 0 120px rgba(79,209,197,.12)}}
@keyframes ring{0%,100%{transform:scale(1);opacity:.5}50%{transform:scale(1.08);opacity:1}}
.pulse-text{font-family:'Newsreader',serif;font-style:italic;font-weight:300;font-size:1.2rem;line-height:1.7;color:var(--text-secondary);max-width:500px;margin:0 auto}
.pulse-text .hl{color:var(--text-primary);font-weight:400}
.pulse-text .pos{color:var(--accent-green)}
.pulse-text .warn{color:var(--accent-amber)}

/* ═══ Currency Strip ═══ */
.curr-strip{display:flex;gap:20px;justify-content:center;margin-top:16px}
.curr-item{display:flex;align-items:center;gap:8px;font-size:12px;color:var(--text-muted)}
.curr-item .code{font-weight:600;color:var(--text-secondary);min-width:28px}
.curr-bar{height:3px;border-radius:2px;background:var(--accent-teal)}
.curr-item .amt{color:var(--text-secondary);font-variant-numeric:tabular-nums}
.curr-item .fx{font-size:10px;font-family:'JetBrains Mono',monospace}
.curr-item .fx.up{color:var(--accent-green)}.curr-item .fx.dn{color:var(--accent-rose)}

/* ═══ Stats Row ═══ */
.stats-row{display:grid;grid-template-columns:repeat(4,1fr);gap:12px;margin:36px 0}
.stat-card{background:var(--glass-bg);border:1px solid var(--glass-border);border-radius:var(--r);padding:20px;backdrop-filter:blur(8px);transition:all .25s var(--ease-in-out)}
.stat-card:hover{border-color:var(--glass-border-2);background:var(--glass-bg-2)}
.stat-label{font-size:12px;color:var(--text-muted);margin-bottom:8px;text-transform:uppercase;letter-spacing:.06em;font-weight:500}
.stat-value{font-family:'JetBrains Mono',monospace;font-size:1.4rem;font-weight:400;color:var(--text-primary);letter-spacing:-.02em}
.stat-trend{font-size:11px;margin-top:6px;font-family:'JetBrains Mono',monospace}
.stat-trend.up{color:var(--accent-green)}.stat-trend.dn{color:var(--accent-rose)}.stat-trend.flat{color:var(--text-muted)}

/* ═══ Section Header ═══ */
.sec-hdr{display:flex;align-items:baseline;justify-content:space-between;margin-bottom:16px}
.sec-title{font-family:'Newsreader',serif;font-size:1.05rem;font-weight:400;color:var(--text-secondary);letter-spacing:.02em}
.sec-meta{font-size:11px;color:var(--text-muted);font-family:'JetBrains Mono',monospace}

/* ═══ River ═══ */
.river-section{margin:36px 0}
.river-wrap{width:100%;height:180px;border-radius:var(--r);background:var(--glass-bg);border:1px solid var(--glass-border);position:relative;overflow:hidden;cursor:crosshair}
.river-wrap canvas{width:100%;height:100%}
.river-today{position:absolute;top:0;bottom:0;left:42%;width:1px;background:linear-gradient(180deg,transparent,var(--accent-teal),transparent);opacity:.35}
.river-today-lbl{position:absolute;top:6px;left:42%;transform:translateX(-50%);font-size:9px;font-family:'JetBrains Mono',monospace;color:var(--accent-teal);opacity:.5;text-transform:uppercase;letter-spacing:.08em}
.river-tooltip{position:absolute;background:var(--bg-elevated);border:1px solid var(--glass-border-2);padding:8px 12px;border-radius:var(--r-xs);font-size:11px;pointer-events:none;opacity:0;transition:opacity .15s;z-index:5;box-shadow:0 8px 24px rgba(0,0,0,.5)}
.river-tooltip.show{opacity:1}
.river-tooltip .tt-amt{font-family:'JetBrains Mono',monospace;font-weight:500;color:var(--text-primary);font-size:13px}
.river-tooltip .tt-label{color:var(--text-muted);margin-top:2px}
.river-axis{display:flex;justify-content:space-between;margin-top:6px;padding:0 4px}
.river-axis span{font-size:10px;color:var(--text-faint);font-family:'JetBrains Mono',monospace}

/* ═══ Action Cards ═══ */
.actions-section{margin:36px 0}
.action-card{background:var(--glass-bg);border:1px solid var(--glass-border);border-radius:var(--r);padding:16px 20px;margin-bottom:8px;backdrop-filter:blur(8px);cursor:pointer;transition:all .25s var(--ease-in-out);display:flex;align-items:center;gap:14px;position:relative;overflow:hidden}
.action-card::after{content:'';position:absolute;inset:0;background:linear-gradient(135deg,transparent 60%,rgba(79,209,197,.015));opacity:0;transition:opacity .3s}
.action-card:hover{border-color:var(--glass-border-2);transform:translateY(-1px);box-shadow:0 6px 24px rgba(0,0,0,.25)}
.action-card:hover::after{opacity:1}
.action-card.sel{border-color:rgba(79,209,197,.4);box-shadow:0 0 0 1px rgba(79,209,197,.3),0 6px 24px rgba(79,209,197,.08)}
.a-icon{width:36px;height:36px;border-radius:9px;display:flex;align-items:center;justify-content:center;font-size:16px;flex-shrink:0}
.a-icon.urg{background:var(--accent-rose-dim)}.a-icon.att{background:var(--accent-amber-dim)}.a-icon.inf{background:var(--accent-teal-dim)}.a-icon.ai{background:linear-gradient(135deg,var(--accent-teal-dim),var(--accent-purple-dim))}
.a-body{flex:1;min-width:0}
.a-title{font-size:13px;font-weight:500;color:var(--text-primary);margin-bottom:3px}
.a-meta{font-size:11px;color:var(--text-muted);display:flex;align-items:center;gap:6px}
.a-meta .dot{width:3px;height:3px;border-radius:50%;background:var(--text-muted);opacity:.4}
.a-cta{padding:6px 14px;border-radius:var(--r-xs);border:1px solid var(--glass-border);background:transparent;color:var(--text-secondary);font-size:11px;font-family:'Manrope',sans-serif;font-weight:500;cursor:pointer;transition:all .2s;white-space:nowrap;flex-shrink:0}
.a-cta:hover{background:var(--glass-hover);color:var(--text-primary)}
.a-cta.pri{background:var(--accent-teal-dim);border-color:rgba(79,209,197,.2);color:var(--accent-teal)}
.a-cta.pri:hover{background:rgba(79,209,197,.22)}
.a-key{font-family:'JetBrains Mono',monospace;font-size:9px;color:var(--text-faint);padding:2px 5px;border-radius:3px;border:1px solid var(--glass-border);margin-left:4px}

/* ═══ AI Brief ═══ */
.ai-brief{margin:36px 0;background:linear-gradient(135deg,rgba(79,209,197,.04),rgba(183,148,244,.04));border:1px solid rgba(79,209,197,.1);border-radius:var(--r);padding:24px 28px;position:relative;overflow:hidden}
.ai-brief::before{content:'';position:absolute;top:-40px;right:-40px;width:120px;height:120px;border-radius:50%;background:radial-gradient(circle,rgba(79,209,197,.06),transparent);pointer-events:none}
.ai-brief-hdr{display:flex;align-items:center;gap:10px;margin-bottom:14px}
.ai-brief-dot{width:8px;height:8px;border-radius:50%;background:var(--accent-teal);box-shadow:0 0 8px var(--accent-teal)}
.ai-brief-label{font-size:11px;font-weight:600;text-transform:uppercase;letter-spacing:.08em;color:var(--accent-teal);opacity:.8}
.ai-brief-time{font-size:10px;color:var(--text-muted);font-family:'JetBrains Mono',monospace;margin-left:auto}
.ai-brief-text{font-family:'Newsreader',serif;font-size:1rem;line-height:1.75;color:var(--text-secondary);font-style:italic}
.ai-brief-text strong{font-weight:400;color:var(--text-primary)}
.ai-brief-actions{display:flex;gap:8px;margin-top:16px}

/* ═══ Account Cards (Banking) ═══ */
.acct-grid{display:grid;grid-template-columns:repeat(3,1fr);gap:12px;margin:24px 0}
.acct-card{background:var(--glass-bg);border:1px solid var(--glass-border);border-radius:var(--r);padding:20px;cursor:pointer;transition:all .25s var(--ease-in-out);position:relative;overflow:hidden}
.acct-card:hover{border-color:var(--glass-border-2);transform:translateY(-2px);box-shadow:0 8px 32px rgba(0,0,0,.3)}
.acct-card::after{content:'';position:absolute;bottom:0;left:0;right:0;height:3px;border-radius:0 0 var(--r) var(--r)}
.acct-card.checking::after{background:var(--accent-teal)}.acct-card.savings::after{background:var(--accent-blue)}.acct-card.credit::after{background:var(--accent-purple)}
.acct-bank{font-size:11px;color:var(--text-muted);margin-bottom:4px;text-transform:uppercase;letter-spacing:.05em;font-weight:500}
.acct-name{font-size:14px;font-weight:500;color:var(--text-primary);margin-bottom:12px}
.acct-bal{font-family:'JetBrains Mono',monospace;font-size:1.3rem;color:var(--text-primary);letter-spacing:-.02em}
.acct-curr{font-size:.75rem;color:var(--text-muted);margin-left:4px}
.acct-footer{display:flex;justify-content:space-between;align-items:center;margin-top:12px;padding-top:12px;border-top:1px solid var(--glass-border)}
.acct-footer span{font-size:11px;color:var(--text-muted)}
.acct-status{display:flex;align-items:center;gap:4px;font-size:10px}
.acct-status .dot{width:6px;height:6px;border-radius:50%;background:var(--accent-green)}

/* ═══ Transaction Feed ═══ */
.txn-feed{margin:36px 0}
.txn-item{display:flex;align-items:center;gap:14px;padding:14px 0;border-bottom:1px solid var(--glass-border);transition:background .15s;cursor:pointer}
.txn-item:hover{background:var(--glass-bg);margin:0 -12px;padding:14px 12px;border-radius:var(--r-xs)}
.txn-item:last-child{border-bottom:none}
.txn-icon{width:36px;height:36px;border-radius:9px;display:flex;align-items:center;justify-content:center;font-size:16px;flex-shrink:0;background:var(--glass-bg-2)}
.txn-body{flex:1;min-width:0}
.txn-desc{font-size:13px;color:var(--text-primary);font-weight:500;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}
.txn-cat{font-size:11px;color:var(--text-muted);margin-top:2px;display:flex;align-items:center;gap:6px}
.txn-cat .tag{padding:1px 6px;border-radius:3px;background:var(--glass-bg-2);font-size:10px;color:var(--text-secondary)}
.txn-right{text-align:right;flex-shrink:0}
.txn-amt{font-family:'JetBrains Mono',monospace;font-size:13px;font-weight:500}
.txn-amt.in{color:var(--accent-green)}.txn-amt.out{color:var(--text-primary)}
.txn-date{font-size:10px;color:var(--text-muted);margin-top:2px;font-family:'JetBrains Mono',monospace}
.txn-uncat{border-left:2px solid var(--accent-amber);padding-left:12px}

/* ═══ Invoice List (Invoicing) ═══ */
.inv-list{margin:24px 0}
.inv-table{width:100%}
.inv-table-hdr{display:grid;grid-template-columns:100px 1.5fr 1fr 100px 120px;gap:12px;padding:8px 16px;font-size:11px;color:var(--text-muted);text-transform:uppercase;letter-spacing:.06em;font-weight:500;border-bottom:1px solid var(--glass-border)}
.inv-row{display:grid;grid-template-columns:100px 1.5fr 1fr 100px 120px;gap:12px;padding:14px 16px;border-bottom:1px solid var(--glass-border);align-items:center;transition:all .15s;cursor:pointer;border-radius:var(--r-xs)}
.inv-row:hover{background:var(--glass-bg);border-color:transparent}
.inv-num{font-family:'JetBrains Mono',monospace;font-size:12px;color:var(--accent-teal)}
.inv-client{font-size:13px;color:var(--text-primary);font-weight:500}
.inv-client-sub{font-size:11px;color:var(--text-muted)}
.inv-amount{font-family:'JetBrains Mono',monospace;font-size:13px;color:var(--text-primary);text-align:right}
.inv-amount .cur{font-size:10px;color:var(--text-muted)}
.inv-status{display:inline-flex;align-items:center;padding:4px 10px;border-radius:20px;font-size:10px;font-weight:600;text-transform:uppercase;letter-spacing:.04em}
.inv-status.paid{background:var(--accent-green-dim);color:var(--accent-green)}
.inv-status.pending{background:var(--accent-amber-dim);color:var(--accent-amber)}
.inv-status.overdue{background:var(--accent-rose-dim);color:var(--accent-rose)}
.inv-status.draft{background:var(--glass-bg-2);color:var(--text-muted)}
.inv-due{font-size:12px;color:var(--text-muted);font-family:'JetBrains Mono',monospace}
.inv-due.late{color:var(--accent-rose)}

/* ═══ Aging Bar (Invoicing) ═══ */
.aging-section{margin:24px 0}
.aging-bar{display:flex;height:8px;border-radius:4px;overflow:hidden;gap:2px;margin:12px 0}
.aging-seg{border-radius:3px;transition:flex .5s var(--ease-out)}
.aging-legend{display:flex;gap:20px;margin-top:8px}
.aging-item{display:flex;align-items:center;gap:6px;font-size:11px;color:var(--text-muted)}
.aging-dot{width:8px;height:8px;border-radius:2px}

/* ═══ AI Advisor View ═══ */
.ai-insight-card{background:var(--glass-bg);border:1px solid var(--glass-border);border-radius:var(--r);padding:20px 24px;margin-bottom:12px;cursor:pointer;transition:all .25s var(--ease-in-out)}
.ai-insight-card:hover{border-color:var(--glass-border-2);transform:translateY(-1px);box-shadow:0 4px 20px rgba(0,0,0,.2)}
.ai-insight-type{font-size:10px;font-weight:600;text-transform:uppercase;letter-spacing:.08em;margin-bottom:8px;display:flex;align-items:center;gap:6px}
.ai-insight-type.saving{color:var(--accent-green)}.ai-insight-type.warning{color:var(--accent-amber)}.ai-insight-type.growth{color:var(--accent-teal)}.ai-insight-type.risk{color:var(--accent-rose)}
.ai-insight-title{font-size:14px;font-weight:500;color:var(--text-primary);margin-bottom:6px}
.ai-insight-body{font-size:13px;color:var(--text-secondary);line-height:1.6}
.ai-insight-footer{display:flex;align-items:center;justify-content:space-between;margin-top:14px}
.ai-confidence{display:flex;align-items:center;gap:6px;font-size:11px;color:var(--text-muted)}
.ai-conf-bar{width:60px;height:3px;border-radius:2px;background:var(--glass-bg-2);overflow:hidden}
.ai-conf-fill{height:100%;border-radius:2px;background:var(--accent-teal)}

/* ═══ Detail Panel ═══ */
.detail-overlay{position:fixed;inset:0;background:rgba(7,7,12,.45);z-index:50;display:none;opacity:0;transition:opacity .3s}
.detail-overlay.vis{display:block;opacity:1}
.detail-panel{position:fixed;top:0;right:0;bottom:0;width:440px;background:var(--bg-surface);border-left:1px solid var(--glass-border);z-index:51;padding:32px;display:none;transform:translateX(100%);transition:transform .35s var(--ease-out);overflow-y:auto}
.detail-panel.vis{display:block;transform:translateX(0)}
.d-close{position:absolute;top:16px;right:16px;width:32px;height:32px;border-radius:8px;border:1px solid var(--glass-border);background:transparent;color:var(--text-muted);cursor:pointer;display:flex;align-items:center;justify-content:center;font-size:14px;transition:all .2s}
.d-close:hover{background:var(--glass-hover);color:var(--text-primary)}
.d-badge{display:inline-block;padding:4px 10px;border-radius:20px;font-size:10px;font-weight:600;margin-bottom:14px}
.d-badge.overdue{background:var(--accent-rose-dim);color:var(--accent-rose)}
.d-badge.pending{background:var(--accent-amber-dim);color:var(--accent-amber)}
.d-badge.matched{background:var(--accent-green-dim);color:var(--accent-green)}
.d-title{font-family:'Newsreader',serif;font-size:1.4rem;font-weight:400;margin-bottom:4px}
.d-sub{font-size:13px;color:var(--text-muted);margin-bottom:20px}
.d-amount{font-family:'JetBrains Mono',monospace;font-size:1.8rem;letter-spacing:-.02em;margin-bottom:28px}
.d-amount .cur{font-size:.9rem;color:var(--text-muted);margin-left:4px}
.d-row{display:flex;justify-content:space-between;align-items:center;padding:10px 0;border-bottom:1px solid var(--glass-border)}
.d-row-l{font-size:12px;color:var(--text-muted)}
.d-row-v{font-size:12px;color:var(--text-primary);font-variant-numeric:tabular-nums}
.d-actions{display:flex;flex-direction:column;gap:6px;margin-top:24px}
.d-btn{width:100%;padding:10px 14px;border-radius:var(--r-xs);border:1px solid var(--glass-border);background:transparent;color:var(--text-secondary);font-size:12px;font-family:'Manrope',sans-serif;font-weight:500;cursor:pointer;transition:all .2s;text-align:left}
.d-btn:hover{background:var(--glass-hover);color:var(--text-primary)}
.d-btn.pri{background:var(--accent-teal-dim);border-color:rgba(79,209,197,.2);color:var(--accent-teal)}
.d-btn.pri:hover{background:rgba(79,209,197,.22)}

/* ═══ Command Palette ═══ */
.cmd-overlay{position:fixed;inset:0;background:rgba(7,7,12,.65);backdrop-filter:blur(6px);z-index:100;display:none;align-items:flex-start;justify-content:center;padding-top:18vh}
.cmd-overlay.vis{display:flex}
.cmd-box{width:540px;background:var(--bg-elevated);border:1px solid var(--glass-border-2);border-radius:var(--r);box-shadow:0 24px 80px rgba(0,0,0,.6);overflow:hidden;animation:cmd-in .2s var(--ease-out)}
@keyframes cmd-in{from{opacity:0;transform:translateY(-8px) scale(.98)}to{opacity:1;transform:none}}
.cmd-input{width:100%;padding:16px 20px;background:transparent;border:none;border-bottom:1px solid var(--glass-border);color:var(--text-primary);font-family:'Manrope',sans-serif;font-size:15px;outline:none}
.cmd-input::placeholder{color:var(--text-muted)}
.cmd-results{padding:6px;max-height:320px;overflow-y:auto}
.cmd-item{padding:10px 12px;border-radius:var(--r-xs);display:flex;align-items:center;gap:12px;cursor:pointer;transition:background .1s}
.cmd-item:hover,.cmd-item.sel{background:var(--glass-hover)}
.cmd-i-icon{width:28px;height:28px;display:flex;align-items:center;justify-content:center;border-radius:6px;background:var(--glass-bg);color:var(--text-secondary);font-size:13px}
.cmd-i-text{flex:1}
.cmd-i-title{font-size:13px;color:var(--text-primary)}
.cmd-i-desc{font-size:10px;color:var(--text-muted)}
.cmd-i-key{font-family:'JetBrains Mono',monospace;font-size:10px;color:var(--text-faint)}
.cmd-footer{padding:8px 16px;border-top:1px solid var(--glass-border);display:flex;gap:16px}
.cmd-footer span{font-size:10px;color:var(--text-faint);display:flex;align-items:center;gap:4px}
.cmd-footer kbd{font-family:'JetBrains Mono',monospace;padding:1px 4px;border-radius:3px;border:1px solid var(--glass-border);font-size:9px}

/* ═══ Toast ═══ */
.toast{position:fixed;bottom:60px;left:50%;transform:translateX(-50%) translateY(20px);background:var(--bg-elevated);border:1px solid var(--glass-border-2);border-radius:var(--r-sm);padding:12px 20px;font-size:13px;color:var(--text-primary);box-shadow:0 8px 32px rgba(0,0,0,.5);opacity:0;transition:all .35s var(--ease-out);z-index:200;display:flex;align-items:center;gap:10px;pointer-events:none}
.toast.vis{opacity:1;transform:translateX(-50%) translateY(0)}
.toast-icon{font-size:16px}

/* ═══ Keyboard Hint Bar ═══ */
.kb-bar{position:fixed;bottom:16px;left:50%;transform:translateX(-50%);display:flex;gap:14px;padding:6px 14px;border-radius:20px;background:var(--bg-elevated);border:1px solid var(--glass-border);z-index:5;opacity:0;animation:kb-in .6s ease 2.5s forwards}
@keyframes kb-in{to{opacity:1}}
.kb-item{display:flex;align-items:center;gap:5px;font-size:10px;color:var(--text-muted)}
.kb-key{font-family:'JetBrains Mono',monospace;font-size:9px;padding:1px 5px;border-radius:3px;border:1px solid var(--glass-border);color:var(--text-secondary)}

/* ═══ Animations ═══ */
.fi{opacity:0;transform:translateY(12px);animation:fi .5s var(--ease-out) forwards}
.fi-1{animation-delay:.08s}.fi-2{animation-delay:.16s}.fi-3{animation-delay:.26s}.fi-4{animation-delay:.36s}.fi-5{animation-delay:.46s}.fi-6{animation-delay:.56s}
@keyframes fi{to{opacity:1;transform:none}}

/* ═══ Scrollbar ═══ */
::-webkit-scrollbar{width:5px}::-webkit-scrollbar-track{background:transparent}::-webkit-scrollbar-thumb{background:var(--glass-border);border-radius:3px}::-webkit-scrollbar-thumb:hover{background:rgba(255,255,255,.1)}

/* ═══ Zen Garden ═══ */
.zen{text-align:center;padding:60px 0;display:none}
.zen.vis{display:block;animation:fi .8s var(--ease-out)}
.zen-text{font-family:'Newsreader',serif;font-style:italic;color:var(--text-muted);font-size:1rem}
.zen-art{margin:32px auto 0;width:200px;height:60px;position:relative}
.zen-line{position:absolute;left:10%;right:10%;height:1px;background:var(--text-faint);opacity:.15}
.zen-line:nth-child(1){top:15px}.zen-line:nth-child(2){top:25px}.zen-line:nth-child(3){top:35px}.zen-line:nth-child(4){top:45px}
.zen-stone{position:absolute;border-radius:50%;background:var(--text-muted);opacity:.2}
.zen-stone:nth-child(5){width:14px;height:14px;left:45%;top:20px}.zen-stone:nth-child(6){width:10px;height:10px;left:60%;top:30px}.zen-stone:nth-child(7){width:7px;height:7px;left:35%;top:35px}

/* ═══ Recon Status (Banking) ═══ */
.recon-bar-section{margin:24px 0}
.recon-bar-wrap{display:flex;align-items:center;gap:12px}
.recon-bar{flex:1;height:6px;border-radius:3px;background:var(--glass-bg-2);overflow:hidden}
.recon-bar-fill{height:100%;border-radius:3px;background:linear-gradient(90deg,var(--accent-teal),var(--accent-green));transition:width 1s var(--ease-out)}
.recon-pct{font-family:'JetBrains Mono',monospace;font-size:13px;color:var(--accent-teal);min-width:48px;text-align:right}
</style>
</head>
<body>

<div class="app">
  <!-- ═══ Sidebar ═══ -->
  <nav class="sidebar">
    <div class="sidebar-logo" onclick="switchDomain('overview')">A</div>
    <div class="nav-group">
      <button class="domain-btn active" data-domain="overview">
        <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5"><rect x="3" y="3" width="7" height="7" rx="1.5"/><rect x="14" y="3" width="7" height="7" rx="1.5"/><rect x="3" y="14" width="7" height="7" rx="1.5"/><rect x="14" y="14" width="7" height="7" rx="1.5"/></svg>
        <span class="domain-tip">Overview</span>
      </button>
      <button class="domain-btn" data-domain="banking">
        <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5"><path d="M3 21h18M3 10h18M5 6l7-3 7 3M4 10v11M20 10v11M8 14v3M12 14v3M16 14v3"/></svg>
        <span class="badge">3</span>
        <span class="domain-tip">Banking</span>
      </button>
      <button class="domain-btn" data-domain="invoicing">
        <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5"><path d="M14 2H6a2 2 0 00-2 2v16a2 2 0 002 2h12a2 2 0 002-2V8z"/><path d="M14 2v6h6M16 13H8M16 17H8M10 9H8"/></svg>
        <span class="badge">1</span>
        <span class="domain-tip">Invoicing</span>
      </button>
      <button class="domain-btn" data-domain="vendors">
        <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5"><path d="M16 4h2a2 2 0 012 2v14a2 2 0 01-2 2H6a2 2 0 01-2-2V6a2 2 0 012-2h2"/><rect x="8" y="2" width="8" height="4" rx="1"/></svg>
        <span class="domain-tip">Vendors</span>
      </button>
      <div class="nav-divider"></div>
      <button class="domain-btn" data-domain="accounting">
        <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5"><path d="M4 7V4h16v3M9 20h6M12 4v16"/></svg>
        <span class="domain-tip">Accounting</span>
      </button>
      <button class="domain-btn" data-domain="planning">
        <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5"><path d="M22 12h-4l-3 9L9 3l-3 9H2"/></svg>
        <span class="domain-tip">Planning</span>
      </button>
      <div class="nav-divider"></div>
      <button class="domain-btn" data-domain="ai">
        <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5"><path d="M12 2a7 7 0 017 7c0 2.38-1.19 4.47-3 5.74V17a2 2 0 01-2 2h-4a2 2 0 01-2-2v-2.26C6.19 13.47 5 11.38 5 9a7 7 0 017-7z"/><path d="M9 21h6"/></svg>
        <span class="ai-dot"></span>
        <span class="domain-tip">AI Advisor</span>
      </button>
      <button class="domain-btn" data-domain="services">
        <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5"><circle cx="12" cy="12" r="3"/><path d="M19.4 15a1.65 1.65 0 00.33 1.82l.06.06a2 2 0 01-2.83 2.83l-.06-.06A1.65 1.65 0 0015 19.4a1.65 1.65 0 00-1 1.51V21a2 2 0 01-4 0v-.09A1.65 1.65 0 009 19.4a1.65 1.65 0 00-1.82.33l-.06.06a2 2 0 01-2.83-2.83l.06-.06A1.65 1.65 0 004.68 15a1.65 1.65 0 00-1.51-1H3a2 2 0 010-4h.09A1.65 1.65 0 004.6 9a1.65 1.65 0 00-.33-1.82l-.06-.06a2 2 0 012.83-2.83l.06.06A1.65 1.65 0 009 4.68V3a2 2 0 014 0v.09a1.65 1.65 0 001 1.51 1.65 1.65 0 001.82-.33l.06-.06a2 2 0 012.83 2.83l-.06.06A1.65 1.65 0 0019.4 9c.26.46.4.99.51 1H21a2 2 0 010 4h-.09a1.65 1.65 0 00-1.51 1z"/></svg>
        <span class="domain-tip">Services</span>
      </button>
    </div>
    <div class="sidebar-bottom">
      <div class="avatar" title="Sunny Marakana">S</div>
    </div>
  </nav>

  <!-- ═══ Main Content ═══ -->
  <div class="main">

    <!-- ─── OVERVIEW ─── -->
    <div class="domain-view active" id="view-overview">
      <div class="greeting fi fi-1">Good evening, <strong>Sunny</strong></div>
      <div class="greeting-date fi fi-1">Sunday, February 9, 2026</div>

      <section class="pulse-section fi fi-2">
        <div class="pulse-orb-wrap">
          <div class="pulse-r2"></div>
          <div class="pulse-r1"></div>
          <div class="pulse-orb"></div>
        </div>
        <p class="pulse-text">
          You have <span class="hl">$47,200</span> across 3 accounts.
          <span class="pos">$12,400</span> arriving this week from 2 invoices.
          <span class="warn">$3,200</span> due Friday.
        </p>
        <div class="curr-strip">
          <div class="curr-item"><span class="code">CAD</span><div class="curr-bar" style="width:72px;opacity:.5"></div><span class="amt">$29,300</span><span class="fx up">+0.3%</span></div>
          <div class="curr-item"><span class="code">USD</span><div class="curr-bar" style="width:40px;opacity:.3"></div><span class="amt">$13,200</span><span class="fx dn">-0.1%</span></div>
          <div class="curr-item"><span class="code">EUR</span><div class="curr-bar" style="width:16px;opacity:.2"></div><span class="amt">$4,700</span><span class="fx up">+2.1%</span></div>
        </div>
      </section>

      <div class="stats-row fi fi-3">
        <div class="stat-card">
          <div class="stat-label">Revenue</div>
          <div class="stat-value">$24,800</div>
          <div class="stat-trend up">+12% vs Jan</div>
        </div>
        <div class="stat-card">
          <div class="stat-label">Expenses</div>
          <div class="stat-value">$8,420</div>
          <div class="stat-trend dn">+3% vs Jan</div>
        </div>
        <div class="stat-card">
          <div class="stat-label">Profit</div>
          <div class="stat-value">$16,380</div>
          <div class="stat-trend up">+18% vs Jan</div>
        </div>
        <div class="stat-card">
          <div class="stat-label">Runway</div>
          <div class="stat-value">5.6 mo</div>
          <div class="stat-trend flat">Stable</div>
        </div>
      </div>

      <section class="river-section fi fi-4">
        <div class="sec-hdr">
          <h2 class="sec-title">Cash Flow</h2>
          <span class="sec-meta">Jan 15 — Mar 15</span>
        </div>
        <div class="river-wrap" id="riverWrap">
          <canvas id="riverCanvas"></canvas>
          <div class="river-today"></div>
          <div class="river-today-lbl">Today</div>
          <div class="river-tooltip" id="riverTip">
            <div class="tt-amt">$47,200</div>
            <div class="tt-label">Cash balance</div>
          </div>
        </div>
        <div class="river-axis">
          <span>Jan 15</span><span>Feb 1</span><span>Feb 15</span><span>Mar 1</span><span>Mar 15</span>
        </div>
      </section>

      <section class="actions-section fi fi-5">
        <div class="sec-hdr">
          <h2 class="sec-title">Actions</h2>
          <span class="sec-meta">3 items</span>
        </div>
        <div class="action-card sel" data-action="0" tabindex="0">
          <div class="a-icon urg">&#9889;</div>
          <div class="a-body"><div class="a-title">Send overdue invoice to ABC Corp</div><div class="a-meta"><span>$4,200 USD</span><span class="dot"></span><span>3 days overdue</span></div></div>
          <button class="a-cta pri" onclick="event.stopPropagation();showToast('Reminder sent to ABC Corp')">Send Now</button>
          <span class="a-key">&#9166;</span>
        </div>
        <div class="action-card" data-action="1" tabindex="0">
          <div class="a-icon att">&#128229;</div>
          <div class="a-body"><div class="a-title">Categorize 3 bank transactions</div><div class="a-meta"><span>RBC Business</span><span class="dot"></span><span>Imported today</span></div></div>
          <button class="a-cta" onclick="event.stopPropagation();switchDomain('banking')">Review</button>
        </div>
        <div class="action-card" data-action="2" tabindex="0">
          <div class="a-icon ai">&#10022;</div>
          <div class="a-body"><div class="a-title">EUR exchange rate shifted +2.1%</div><div class="a-meta"><span>Affects 2 open invoices</span><span class="dot"></span><span>AI insight</span></div></div>
          <button class="a-cta" onclick="event.stopPropagation();switchDomain('ai')">See Impact</button>
        </div>
      </section>

      <section class="ai-brief fi fi-6">
        <div class="ai-brief-hdr">
          <div class="ai-brief-dot"></div>
          <span class="ai-brief-label">Weekly AI Brief</span>
          <span class="ai-brief-time">Mon, Feb 9</span>
        </div>
        <p class="ai-brief-text">
          Your <strong>Q1 revenue is 23% above last year</strong>, driven by 3 new consulting contracts.
          Cash reserves are healthy at 5.6 months runway. One concern: <strong>ABC Corp's payment is now 3 days late</strong> — historically they pay within 2 days of reminder. EUR strength boosted your European receivables by <strong>$340 CAD equivalent</strong> this week.
        </p>
        <div class="ai-brief-actions">
          <button class="a-cta" onclick="switchDomain('ai')">View Full Analysis</button>
          <button class="a-cta" onclick="showToast('Brief dismissed')">Dismiss</button>
        </div>
      </section>
    </div>

    <!-- ─── BANKING ─── -->
    <div class="domain-view" id="view-banking">
      <div class="greeting fi fi-1">Banking</div>
      <div class="greeting-date fi fi-1">3 accounts &middot; 2 currencies &middot; Last synced 2 min ago</div>

      <div class="acct-grid fi fi-2">
        <div class="acct-card checking" onclick="openDetail('acct-rbc')">
          <div class="acct-bank">RBC Royal Bank</div>
          <div class="acct-name">Business Chequing</div>
          <div class="acct-bal">$29,340<span class="acct-curr">CAD</span></div>
          <div class="acct-footer">
            <span>****4521</span>
            <span class="acct-status"><span class="dot"></span> Synced</span>
          </div>
        </div>
        <div class="acct-card savings" onclick="openDetail('acct-wise')">
          <div class="acct-bank">Wise</div>
          <div class="acct-name">USD Balance</div>
          <div class="acct-bal">$13,160<span class="acct-curr">USD</span></div>
          <div class="acct-footer">
            <span>Multi-currency</span>
            <span class="acct-status"><span class="dot"></span> Synced</span>
          </div>
        </div>
        <div class="acct-card credit" onclick="openDetail('acct-amex')">
          <div class="acct-bank">American Express</div>
          <div class="acct-name">Business Platinum</div>
          <div class="acct-bal">-$2,840<span class="acct-curr">CAD</span></div>
          <div class="acct-footer">
            <span>****1008</span>
            <span class="acct-status"><span class="dot"></span> Synced</span>
          </div>
        </div>
      </div>

      <section class="recon-bar-section fi fi-3">
        <div class="sec-hdr">
          <h2 class="sec-title">Reconciliation</h2>
          <span class="sec-meta">Feb 2026</span>
        </div>
        <div class="recon-bar-wrap">
          <div class="recon-bar"><div class="recon-bar-fill" style="width:78%"></div></div>
          <div class="recon-pct">78%</div>
        </div>
        <div class="a-meta" style="margin-top:8px"><span>42 of 54 transactions matched</span><span class="dot"></span><span>12 pending review</span></div>
      </section>

      <section class="txn-feed fi fi-4">
        <div class="sec-hdr">
          <h2 class="sec-title">Recent Transactions</h2>
          <span class="sec-meta">Last 7 days</span>
        </div>

        <div class="txn-item txn-uncat" onclick="openDetail('txn-cat')">
          <div class="txn-icon" style="background:var(--accent-amber-dim)">&#128230;</div>
          <div class="txn-body"><div class="txn-desc">AMZN MKTP CA*2R4K1</div><div class="txn-cat"><span class="tag" style="background:var(--accent-amber-dim);color:var(--accent-amber)">Uncategorized</span></div></div>
          <div class="txn-right"><div class="txn-amt out">-$84.99</div><div class="txn-date">Feb 9</div></div>
        </div>
        <div class="txn-item txn-uncat">
          <div class="txn-icon" style="background:var(--accent-amber-dim)">&#127963;</div>
          <div class="txn-body"><div class="txn-desc">UBER TRIP 4X92HJ</div><div class="txn-cat"><span class="tag" style="background:var(--accent-amber-dim);color:var(--accent-amber)">Uncategorized</span></div></div>
          <div class="txn-right"><div class="txn-amt out">-$23.40</div><div class="txn-date">Feb 9</div></div>
        </div>
        <div class="txn-item txn-uncat">
          <div class="txn-icon" style="background:var(--accent-amber-dim)">&#9749;</div>
          <div class="txn-body"><div class="txn-desc">STARBUCKS #12445</div><div class="txn-cat"><span class="tag" style="background:var(--accent-amber-dim);color:var(--accent-amber)">Uncategorized</span></div></div>
          <div class="txn-right"><div class="txn-amt out">-$6.80</div><div class="txn-date">Feb 8</div></div>
        </div>
        <div class="txn-item">
          <div class="txn-icon">&#128179;</div>
          <div class="txn-body"><div class="txn-desc">Wise Transfer — EUR to CAD</div><div class="txn-cat"><span class="tag">Transfer</span> <span>Automatic</span></div></div>
          <div class="txn-right"><div class="txn-amt in">+$4,700.00</div><div class="txn-date">Feb 7</div></div>
        </div>
        <div class="txn-item">
          <div class="txn-icon">&#128176;</div>
          <div class="txn-body"><div class="txn-desc">XYZ Ltd — Invoice #1043</div><div class="txn-cat"><span class="tag">Client Payment</span> <span>Matched</span></div></div>
          <div class="txn-right"><div class="txn-amt in">+$8,200.00</div><div class="txn-date">Feb 6</div></div>
        </div>
        <div class="txn-item">
          <div class="txn-icon">&#127968;</div>
          <div class="txn-body"><div class="txn-desc">WeWork — Monthly Office</div><div class="txn-cat"><span class="tag">Rent</span> <span>Recurring</span></div></div>
          <div class="txn-right"><div class="txn-amt out">-$1,800.00</div><div class="txn-date">Feb 5</div></div>
        </div>
        <div class="txn-item">
          <div class="txn-icon">&#128187;</div>
          <div class="txn-body"><div class="txn-desc">Vercel Pro — Hosting</div><div class="txn-cat"><span class="tag">SaaS</span> <span>Recurring</span></div></div>
          <div class="txn-right"><div class="txn-amt out">-$20.00</div><div class="txn-date">Feb 4</div></div>
        </div>
        <div class="txn-item">
          <div class="txn-icon">&#128176;</div>
          <div class="txn-body"><div class="txn-desc">DEF Consulting — Retainer</div><div class="txn-cat"><span class="tag">Client Payment</span> <span>Matched</span></div></div>
          <div class="txn-right"><div class="txn-amt in">+$3,500.00</div><div class="txn-date">Feb 3</div></div>
        </div>
      </section>
    </div>

    <!-- ─── INVOICING ─── -->
    <div class="domain-view" id="view-invoicing">
      <div class="greeting fi fi-1">Invoicing</div>
      <div class="greeting-date fi fi-1">8 invoices &middot; $42,800 outstanding &middot; $12,400 due this week</div>

      <div class="stats-row fi fi-2" style="grid-template-columns:repeat(3,1fr)">
        <div class="stat-card">
          <div class="stat-label">Outstanding</div>
          <div class="stat-value">$42,800</div>
          <div class="stat-trend flat">8 invoices</div>
        </div>
        <div class="stat-card">
          <div class="stat-label">Collected (Feb)</div>
          <div class="stat-value">$18,600</div>
          <div class="stat-trend up">+24% vs Jan</div>
        </div>
        <div class="stat-card">
          <div class="stat-label">Avg Days to Pay</div>
          <div class="stat-value">14.2 d</div>
          <div class="stat-trend up">-2.1 days</div>
        </div>
      </div>

      <section class="aging-section fi fi-3">
        <div class="sec-hdr">
          <h2 class="sec-title">Aging</h2>
          <span class="sec-meta">$42,800 total</span>
        </div>
        <div class="aging-bar">
          <div class="aging-seg" style="flex:48;background:var(--accent-green)"></div>
          <div class="aging-seg" style="flex:28;background:var(--accent-amber)"></div>
          <div class="aging-seg" style="flex:14;background:var(--accent-rose)"></div>
          <div class="aging-seg" style="flex:10;background:#E53E3E"></div>
        </div>
        <div class="aging-legend">
          <div class="aging-item"><div class="aging-dot" style="background:var(--accent-green)"></div>Current $20,400</div>
          <div class="aging-item"><div class="aging-dot" style="background:var(--accent-amber)"></div>1-30 days $12,200</div>
          <div class="aging-item"><div class="aging-dot" style="background:var(--accent-rose)"></div>31-60 days $6,000</div>
          <div class="aging-item"><div class="aging-dot" style="background:#E53E3E"></div>60+ days $4,200</div>
        </div>
      </section>

      <section class="inv-list fi fi-4">
        <div class="sec-hdr">
          <h2 class="sec-title">All Invoices</h2>
          <button class="a-cta pri" onclick="showToast('New invoice created')">+ New Invoice</button>
        </div>
        <div class="inv-table">
          <div class="inv-table-hdr"><span>#</span><span>Client</span><span style="text-align:right">Amount</span><span>Status</span><span>Due</span></div>
          <div class="inv-row" onclick="openDetail('inv-1047')">
            <span class="inv-num">#1047</span>
            <span><span class="inv-client">ABC Corp</span><br><span class="inv-client-sub">Consulting Services</span></span>
            <span class="inv-amount">$4,200.00 <span class="cur">USD</span></span>
            <span><span class="inv-status overdue">Overdue</span></span>
            <span class="inv-due late">Feb 6</span>
          </div>
          <div class="inv-row" onclick="openDetail('inv-1046')">
            <span class="inv-num">#1046</span>
            <span><span class="inv-client">XYZ Ltd</span><br><span class="inv-client-sub">Monthly Retainer</span></span>
            <span class="inv-amount">$8,200.00 <span class="cur">CAD</span></span>
            <span><span class="inv-status paid">Paid</span></span>
            <span class="inv-due">Feb 6</span>
          </div>
          <div class="inv-row">
            <span class="inv-num">#1045</span>
            <span><span class="inv-client">TechStart GmbH</span><br><span class="inv-client-sub">API Integration</span></span>
            <span class="inv-amount">&euro;6,500.00 <span class="cur">EUR</span></span>
            <span><span class="inv-status pending">Pending</span></span>
            <span class="inv-due">Feb 12</span>
          </div>
          <div class="inv-row">
            <span class="inv-num">#1044</span>
            <span><span class="inv-client">Maple Digital</span><br><span class="inv-client-sub">Design System Audit</span></span>
            <span class="inv-amount">$5,900.00 <span class="cur">CAD</span></span>
            <span><span class="inv-status pending">Pending</span></span>
            <span class="inv-due">Feb 14</span>
          </div>
          <div class="inv-row">
            <span class="inv-num">#1043</span>
            <span><span class="inv-client">DEF Consulting</span><br><span class="inv-client-sub">Strategy Workshop</span></span>
            <span class="inv-amount">$3,500.00 <span class="cur">CAD</span></span>
            <span><span class="inv-status paid">Paid</span></span>
            <span class="inv-due">Feb 3</span>
          </div>
          <div class="inv-row">
            <span class="inv-num">#1042</span>
            <span><span class="inv-client">NovaSync Inc</span><br><span class="inv-client-sub">Platform Migration</span></span>
            <span class="inv-amount">$12,000.00 <span class="cur">USD</span></span>
            <span><span class="inv-status draft">Draft</span></span>
            <span class="inv-due">—</span>
          </div>
        </div>
      </section>
    </div>

    <!-- ─── AI ADVISOR ─── -->
    <div class="domain-view" id="view-ai">
      <div class="greeting fi fi-1">AI Advisor</div>
      <div class="greeting-date fi fi-1">4 new insights &middot; Last analysis: 2 hours ago</div>

      <section class="ai-brief fi fi-2" style="margin-top:24px">
        <div class="ai-brief-hdr">
          <div class="ai-brief-dot"></div>
          <span class="ai-brief-label">Weekly Intelligence Brief</span>
          <span class="ai-brief-time">Feb 9, 2026</span>
        </div>
        <p class="ai-brief-text">
          Your business is in <strong>strong health</strong>. Revenue grew 23% YoY in Q1, with consulting as the primary driver.
          Cash runway at 5.6 months is above your 4-month target. The EUR strengthening trend (+2.1% this week)
          adds <strong>$340 CAD</strong> to your European receivables. One risk factor: ABC Corp's invoice is now 3 days overdue.
          Based on their payment history, a single reminder typically resolves within 48 hours.
        </p>
      </section>

      <section class="fi fi-3" style="margin-top:36px">
        <div class="sec-hdr">
          <h2 class="sec-title">Insights</h2>
          <span class="sec-meta">4 active</span>
        </div>

        <div class="ai-insight-card">
          <div class="ai-insight-type saving">&#10003; Cost Saving</div>
          <div class="ai-insight-title">Consolidate SaaS subscriptions to save $340/mo</div>
          <div class="ai-insight-body">You have 3 overlapping tools for project management (Notion, Linear, Asana). Consolidating to one could save $340/month ($4,080/year). Based on usage patterns, Linear has the highest engagement.</div>
          <div class="ai-insight-footer">
            <div class="ai-confidence"><span>Confidence</span><div class="ai-conf-bar"><div class="ai-conf-fill" style="width:88%"></div></div><span>88%</span></div>
            <button class="a-cta" onclick="showToast('Insight saved to action items')">Act on this</button>
          </div>
        </div>

        <div class="ai-insight-card">
          <div class="ai-insight-type growth">&#8599; Growth</div>
          <div class="ai-insight-title">Your EUR clients pay 6 days faster than average</div>
          <div class="ai-insight-body">European clients pay invoices in 8.3 days vs your portfolio average of 14.2 days. Consider expanding EUR-denominated engagements to improve cash flow velocity.</div>
          <div class="ai-insight-footer">
            <div class="ai-confidence"><span>Confidence</span><div class="ai-conf-bar"><div class="ai-conf-fill" style="width:94%"></div></div><span>94%</span></div>
            <button class="a-cta">View Details</button>
          </div>
        </div>

        <div class="ai-insight-card">
          <div class="ai-insight-type warning">&#9888; Attention</div>
          <div class="ai-insight-title">ABC Corp payment pattern is unusual</div>
          <div class="ai-insight-body">ABC Corp typically pays within 2 days of invoice. Invoice #1047 is now 3 days overdue — the first late payment in 18 months. A courtesy reminder is recommended before escalation.</div>
          <div class="ai-insight-footer">
            <div class="ai-confidence"><span>Confidence</span><div class="ai-conf-bar"><div class="ai-conf-fill" style="width:76%"></div></div><span>76%</span></div>
            <button class="a-cta pri" onclick="showToast('Reminder sent to ABC Corp')">Send Reminder</button>
          </div>
        </div>

        <div class="ai-insight-card">
          <div class="ai-insight-type risk">&#9888; Risk</div>
          <div class="ai-insight-title">Cash dip projected mid-March if Q2 contracts delayed</div>
          <div class="ai-insight-body">If the 2 pending Q2 proposals (NovaSync, Meridian) aren't signed by March 8, your cash position could drop below 4-month runway by March 20. Consider accelerating proposal follow-ups.</div>
          <div class="ai-insight-footer">
            <div class="ai-confidence"><span>Confidence</span><div class="ai-conf-bar"><div class="ai-conf-fill" style="width:62%"></div></div><span>62%</span></div>
            <button class="a-cta">View Forecast</button>
          </div>
        </div>
      </section>
    </div>

    <!-- ─── PLACEHOLDER VIEWS ─── -->
    <div class="domain-view" id="view-vendors">
      <div class="greeting fi fi-1">Vendors</div>
      <div class="greeting-date fi fi-1">2 vendors &middot; $3,200 payable &middot; Next payment Friday</div>
      <div class="zen vis" style="display:block">
        <div class="zen-text">Vendor management coming in Phase 3</div>
        <div class="zen-art"><div class="zen-line"></div><div class="zen-line"></div><div class="zen-line"></div><div class="zen-line"></div><div class="zen-stone"></div><div class="zen-stone"></div><div class="zen-stone"></div></div>
      </div>
    </div>
    <div class="domain-view" id="view-accounting">
      <div class="greeting fi fi-1">Accounting</div>
      <div class="greeting-date fi fi-1">General ledger &middot; Journal entries &middot; Chart of accounts</div>
      <div class="zen vis" style="display:block">
        <div class="zen-text">Accounting views arriving soon</div>
        <div class="zen-art"><div class="zen-line"></div><div class="zen-line"></div><div class="zen-line"></div><div class="zen-line"></div><div class="zen-stone"></div><div class="zen-stone"></div><div class="zen-stone"></div></div>
      </div>
    </div>
    <div class="domain-view" id="view-planning">
      <div class="greeting fi fi-1">Planning</div>
      <div class="greeting-date fi fi-1">Budgets &middot; Forecasts &middot; Cash flow projections</div>
      <div class="zen vis" style="display:block">
        <div class="zen-text">Financial planning taking shape</div>
        <div class="zen-art"><div class="zen-line"></div><div class="zen-line"></div><div class="zen-line"></div><div class="zen-line"></div><div class="zen-stone"></div><div class="zen-stone"></div><div class="zen-stone"></div></div>
      </div>
    </div>
    <div class="domain-view" id="view-services">
      <div class="greeting fi fi-1">Services</div>
      <div class="greeting-date fi fi-1">Bank feeds &middot; Accounting integrations &middot; Webhooks</div>
      <div class="zen vis" style="display:block">
        <div class="zen-text">Integrations hub under construction</div>
        <div class="zen-art"><div class="zen-line"></div><div class="zen-line"></div><div class="zen-line"></div><div class="zen-line"></div><div class="zen-stone"></div><div class="zen-stone"></div><div class="zen-stone"></div></div>
      </div>
    </div>

  </div><!-- /main -->
</div><!-- /app -->

<!-- ═══ Detail Panel ═══ -->
<div class="detail-overlay" id="detailOverlay"></div>
<div class="detail-panel" id="detailPanel">
  <button class="d-close" id="detailClose">&times;</button>
  <div id="detailContent">
    <span class="d-badge overdue">3 days overdue</span>
    <h2 class="d-title">Invoice #1047</h2>
    <p class="d-sub">ABC Corp — Consulting Services</p>
    <div class="d-amount">$4,200.00 <span class="cur">USD</span></div>
    <div class="d-row"><span class="d-row-l">Issue Date</span><span class="d-row-v">Jan 28, 2026</span></div>
    <div class="d-row"><span class="d-row-l">Due Date</span><span class="d-row-v" style="color:var(--accent-rose)">Feb 6, 2026</span></div>
    <div class="d-row"><span class="d-row-l">Client Contact</span><span class="d-row-v">sarah@abccorp.com</span></div>
    <div class="d-row"><span class="d-row-l">FX Rate (USD→CAD)</span><span class="d-row-v">1.3520</span></div>
    <div class="d-row"><span class="d-row-l">CAD Equivalent</span><span class="d-row-v">$5,678.40</span></div>
    <div class="d-actions">
      <button class="d-btn pri" onclick="showToast('Payment reminder sent')">&#9993; Send Payment Reminder</button>
      <button class="d-btn" onclick="showToast('Marked as paid')">&#10003; Mark as Paid</button>
      <button class="d-btn">&#128196; View PDF</button>
      <button class="d-btn">&#128337; Payment History</button>
    </div>
  </div>
</div>

<!-- ═══ Command Palette ═══ -->
<div class="cmd-overlay" id="cmdOverlay">
  <div class="cmd-box">
    <input class="cmd-input" id="cmdInput" type="text" placeholder="Search invoices, clients, transactions...">
    <div class="cmd-results" id="cmdResults"></div>
    <div class="cmd-footer">
      <span><kbd>&#8593;</kbd><kbd>&#8595;</kbd> Navigate</span>
      <span><kbd>&#9166;</kbd> Open</span>
      <span><kbd>esc</kbd> Close</span>
    </div>
  </div>
</div>

<!-- ═══ Toast ═══ -->
<div class="toast" id="toast"><span class="toast-icon">&#10003;</span><span id="toastMsg"></span></div>

<!-- ═══ Keyboard Hints ═══ -->
<div class="kb-bar">
  <div class="kb-item"><span class="kb-key">j</span><span class="kb-key">k</span> Navigate</div>
  <div class="kb-item"><span class="kb-key">&#9166;</span> Open</div>
  <div class="kb-item"><span class="kb-key">/</span> Search</div>
  <div class="kb-item"><span class="kb-key">Space</span> Details</div>
  <div class="kb-item"><span class="kb-key">1</span>-<span class="kb-key">8</span> Domains</div>
  <div class="kb-item"><span class="kb-key">Esc</span> Back</div>
</div>

<script>
// ═══ State ═══
let currentDomain = 'overview';
let selectedAction = 0;
let detailOpen = false;
let cmdOpen = false;

const cmdData = [
  {icon:'&#128196;',title:'Invoice #1047 — ABC Corp',desc:'$4,200 USD · Overdue',action:()=>openDetail('inv-1047')},
  {icon:'&#128196;',title:'Invoice #1046 — XYZ Ltd',desc:'$8,200 CAD · Paid',action:()=>openDetail('inv-1046')},
  {icon:'&#128196;',title:'Invoice #1045 — TechStart GmbH',desc:'€6,500 EUR · Pending',action:()=>{}},
  {icon:'&#128176;',title:'RBC Business Chequing',desc:'$29,340 CAD',action:()=>switchDomain('banking')},
  {icon:'&#128176;',title:'Wise USD Balance',desc:'$13,160 USD',action:()=>switchDomain('banking')},
  {icon:'&#128100;',title:'ABC Corp',desc:'Client · 12 invoices · $48,600 lifetime',action:()=>{}},
  {icon:'&#128100;',title:'XYZ Ltd',desc:'Client · 8 invoices · $32,400 lifetime',action:()=>{}},
  {icon:'&#128100;',title:'TechStart GmbH',desc:'Client · 3 invoices · €19,500 lifetime',action:()=>{}},
  {icon:'&#10022;',title:'New Invoice',desc:'Create a new invoice',key:'n',action:()=>showToast('New invoice created')},
  {icon:'&#10022;',title:'New Transaction',desc:'Add manual transaction',action:()=>showToast('Transaction form opened')},
  {icon:'&#129302;',title:'Ask AI Advisor',desc:'Get financial insights',action:()=>switchDomain('ai')},
];
let cmdFiltered = [...cmdData];
let cmdSelected = 0;

// ═══ Domain Switching ═══
function switchDomain(domain) {
  if (currentDomain === domain) return;
  const prev = document.getElementById('view-' + currentDomain);
  const next = document.getElementById('view-' + domain);
  if (!next) return;

  // Fade out
  if (prev) { prev.style.opacity = '0'; prev.style.transform = 'translateY(-8px)'; }
  setTimeout(() => {
    document.querySelectorAll('.domain-view').forEach(v => { v.classList.remove('active'); v.style.opacity = ''; v.style.transform = ''; });
    next.classList.add('active');
    // Re-trigger animations
    next.querySelectorAll('.fi').forEach(el => { el.style.animation = 'none'; el.offsetHeight; el.style.animation = ''; });
    if (domain === 'overview') setTimeout(drawRiver, 100);
  }, 200);

  document.querySelectorAll('.domain-btn').forEach(b => b.classList.remove('active'));
  document.querySelector(`.domain-btn[data-domain="${domain}"]`)?.classList.add('active');
  currentDomain = domain;
  selectedAction = 0;
  closeDetail();
  closeCmd();
}

document.querySelectorAll('.domain-btn').forEach(btn => {
  btn.addEventListener('click', () => switchDomain(btn.dataset.domain));
});

// ═══ Detail Panel ═══
const detailTemplates = {
  'inv-1047': `<span class="d-badge overdue">3 days overdue</span><h2 class="d-title">Invoice #1047</h2><p class="d-sub">ABC Corp — Consulting Services</p><div class="d-amount">$4,200.00 <span class="cur">USD</span></div><div class="d-row"><span class="d-row-l">Issue Date</span><span class="d-row-v">Jan 28, 2026</span></div><div class="d-row"><span class="d-row-l">Due Date</span><span class="d-row-v" style="color:var(--accent-rose)">Feb 6, 2026</span></div><div class="d-row"><span class="d-row-l">Client</span><span class="d-row-v">sarah@abccorp.com</span></div><div class="d-row"><span class="d-row-l">FX Rate</span><span class="d-row-v">1.3520 USD→CAD</span></div><div class="d-row"><span class="d-row-l">CAD Amount</span><span class="d-row-v">$5,678.40</span></div><div class="d-actions"><button class="d-btn pri" onclick="showToast('Reminder sent')">&#9993; Send Payment Reminder</button><button class="d-btn" onclick="showToast('Marked as paid');closeDetail()">&#10003; Mark as Paid</button><button class="d-btn">&#128196; View PDF</button><button class="d-btn">&#128337; Payment History</button></div>`,
  'inv-1046': `<span class="d-badge matched">Paid</span><h2 class="d-title">Invoice #1046</h2><p class="d-sub">XYZ Ltd — Monthly Retainer</p><div class="d-amount">$8,200.00 <span class="cur">CAD</span></div><div class="d-row"><span class="d-row-l">Issue Date</span><span class="d-row-v">Jan 22, 2026</span></div><div class="d-row"><span class="d-row-l">Paid Date</span><span class="d-row-v" style="color:var(--accent-green)">Feb 6, 2026</span></div><div class="d-row"><span class="d-row-l">Payment Method</span><span class="d-row-v">Wire Transfer</span></div><div class="d-row"><span class="d-row-l">Days to Pay</span><span class="d-row-v">15 days</span></div><div class="d-actions"><button class="d-btn">&#128196; View PDF</button><button class="d-btn">&#128337; Payment History</button><button class="d-btn">&#128260; Create Recurring</button></div>`,
  'acct-rbc': `<h2 class="d-title">RBC Business Chequing</h2><p class="d-sub">****4521 &middot; Royal Bank of Canada</p><div class="d-amount">$29,340.00 <span class="cur">CAD</span></div><div class="d-row"><span class="d-row-l">Available</span><span class="d-row-v">$29,340.00</span></div><div class="d-row"><span class="d-row-l">Pending</span><span class="d-row-v">$0.00</span></div><div class="d-row"><span class="d-row-l">Last Sync</span><span class="d-row-v">2 min ago</span></div><div class="d-row"><span class="d-row-l">Transactions (Feb)</span><span class="d-row-v">34</span></div><div class="d-row"><span class="d-row-l">Unmatched</span><span class="d-row-v" style="color:var(--accent-amber)">8</span></div><div class="d-actions"><button class="d-btn pri">&#128260; Sync Now</button><button class="d-btn">&#128200; View Statement</button><button class="d-btn">&#128229; Import CSV</button></div>`,
  'acct-wise': `<h2 class="d-title">Wise USD Balance</h2><p class="d-sub">Multi-currency &middot; Wise Business</p><div class="d-amount">$13,160.00 <span class="cur">USD</span></div><div class="d-row"><span class="d-row-l">CAD Equivalent</span><span class="d-row-v">$17,796.20</span></div><div class="d-row"><span class="d-row-l">FX Rate</span><span class="d-row-v">1.3524</span></div><div class="d-row"><span class="d-row-l">EUR Balance</span><span class="d-row-v">&euro;3,480.00</span></div><div class="d-row"><span class="d-row-l">Last Sync</span><span class="d-row-v">2 min ago</span></div><div class="d-actions"><button class="d-btn pri">&#128260; Sync Now</button><button class="d-btn">&#128179; Convert Currency</button><button class="d-btn">&#128200; View Statement</button></div>`,
  'acct-amex': `<h2 class="d-title">Amex Business Platinum</h2><p class="d-sub">****1008 &middot; American Express</p><div class="d-amount" style="color:var(--accent-rose)">-$2,840.00 <span class="cur">CAD</span></div><div class="d-row"><span class="d-row-l">Credit Limit</span><span class="d-row-v">$25,000.00</span></div><div class="d-row"><span class="d-row-l">Available</span><span class="d-row-v">$22,160.00</span></div><div class="d-row"><span class="d-row-l">Statement Date</span><span class="d-row-v">Feb 15</span></div><div class="d-row"><span class="d-row-l">Payment Due</span><span class="d-row-v">Mar 5</span></div><div class="d-actions"><button class="d-btn pri">&#128176; Pay Balance</button><button class="d-btn">&#128200; View Statement</button></div>`,
  'txn-cat': `<span class="d-badge pending">Uncategorized</span><h2 class="d-title">AMZN MKTP CA*2R4K1</h2><p class="d-sub">RBC Business Chequing &middot; Feb 9, 2026</p><div class="d-amount">-$84.99 <span class="cur">CAD</span></div><div class="d-row"><span class="d-row-l">Type</span><span class="d-row-v">Debit</span></div><div class="d-row"><span class="d-row-l">AI Suggestion</span><span class="d-row-v" style="color:var(--accent-teal)">Office Supplies (87%)</span></div><div class="d-row"><span class="d-row-l">Matched Invoice</span><span class="d-row-v">None</span></div><div class="d-actions"><button class="d-btn pri" onclick="showToast('Categorized as Office Supplies')">&#10003; Accept: Office Supplies</button><button class="d-btn">&#128193; Choose Category</button><button class="d-btn">&#128260; Split Transaction</button><button class="d-btn">&#128065; View Receipt</button></div>`,
};

function openDetail(id) {
  const content = detailTemplates[id];
  if (content) document.getElementById('detailContent').innerHTML = content;
  document.getElementById('detailOverlay').classList.add('vis');
  document.getElementById('detailPanel').classList.add('vis');
  detailOpen = true;
}

function closeDetail() {
  document.getElementById('detailOverlay').classList.remove('vis');
  document.getElementById('detailPanel').classList.remove('vis');
  detailOpen = false;
}

document.getElementById('detailOverlay').addEventListener('click', closeDetail);
document.getElementById('detailClose').addEventListener('click', closeDetail);

// ═══ Command Palette ═══
function openCmd() {
  document.getElementById('cmdOverlay').classList.add('vis');
  document.getElementById('cmdInput').value = '';
  cmdFiltered = [...cmdData];
  cmdSelected = 0;
  renderCmd();
  setTimeout(() => document.getElementById('cmdInput').focus(), 50);
  cmdOpen = true;
}

function closeCmd() {
  document.getElementById('cmdOverlay').classList.remove('vis');
  cmdOpen = false;
}

function renderCmd() {
  const el = document.getElementById('cmdResults');
  el.innerHTML = cmdFiltered.map((item, i) => `
    <div class="cmd-item${i === cmdSelected ? ' sel' : ''}" data-idx="${i}">
      <div class="cmd-i-icon">${item.icon}</div>
      <div class="cmd-i-text"><div class="cmd-i-title">${item.title}</div><div class="cmd-i-desc">${item.desc}</div></div>
      ${item.key ? `<span class="cmd-i-key">${item.key}</span>` : ''}
    </div>
  `).join('');
  el.querySelectorAll('.cmd-item').forEach(ci => {
    ci.addEventListener('click', () => { cmdFiltered[parseInt(ci.dataset.idx)]?.action(); closeCmd(); });
  });
}

document.getElementById('cmdInput').addEventListener('input', (e) => {
  const q = e.target.value.toLowerCase();
  cmdFiltered = q ? cmdData.filter(d => (d.title + d.desc).toLowerCase().includes(q)) : [...cmdData];
  cmdSelected = 0;
  renderCmd();
});

document.getElementById('cmdOverlay').addEventListener('click', (e) => {
  if (e.target === document.getElementById('cmdOverlay')) closeCmd();
});

// ═══ Toast ═══
let toastTimer;
function showToast(msg) {
  clearTimeout(toastTimer);
  document.getElementById('toastMsg').textContent = msg;
  const t = document.getElementById('toast');
  t.classList.add('vis');
  toastTimer = setTimeout(() => t.classList.remove('vis'), 2800);
}

// ═══ Keyboard ═══
document.addEventListener('keydown', (e) => {
  // Command palette keys
  if (cmdOpen) {
    if (e.key === 'Escape') { closeCmd(); e.preventDefault(); }
    else if (e.key === 'ArrowDown') { cmdSelected = Math.min(cmdSelected + 1, cmdFiltered.length - 1); renderCmd(); e.preventDefault(); }
    else if (e.key === 'ArrowUp') { cmdSelected = Math.max(cmdSelected - 1, 0); renderCmd(); e.preventDefault(); }
    else if (e.key === 'Enter') { cmdFiltered[cmdSelected]?.action(); closeCmd(); e.preventDefault(); }
    return;
  }

  // Detail panel keys
  if (detailOpen) {
    if (e.key === 'Escape') { closeDetail(); e.preventDefault(); }
    return;
  }

  // Main keys
  const actions = document.querySelectorAll('#view-overview .action-card');
  switch(e.key) {
    case 'j':
      if (currentDomain === 'overview' && actions.length) {
        selectedAction = Math.min(selectedAction + 1, actions.length - 1);
        actions.forEach((c,i) => c.classList.toggle('sel', i === selectedAction));
      }
      e.preventDefault(); break;
    case 'k':
      if (currentDomain === 'overview' && actions.length) {
        selectedAction = Math.max(selectedAction - 1, 0);
        actions.forEach((c,i) => c.classList.toggle('sel', i === selectedAction));
      }
      e.preventDefault(); break;
    case 'Enter': case ' ':
      if (currentDomain === 'overview') openDetail('inv-1047');
      e.preventDefault(); break;
    case '/':
      openCmd(); e.preventDefault(); break;
    case '1': switchDomain('overview'); e.preventDefault(); break;
    case '2': switchDomain('banking'); e.preventDefault(); break;
    case '3': switchDomain('invoicing'); e.preventDefault(); break;
    case '4': switchDomain('vendors'); e.preventDefault(); break;
    case '5': switchDomain('accounting'); e.preventDefault(); break;
    case '6': switchDomain('planning'); e.preventDefault(); break;
    case '7': switchDomain('ai'); e.preventDefault(); break;
    case '8': switchDomain('services'); e.preventDefault(); break;
  }
});

// Action card clicks
document.querySelectorAll('#view-overview .action-card').forEach((card, i) => {
  card.addEventListener('click', () => {
    selectedAction = i;
    document.querySelectorAll('#view-overview .action-card').forEach((c,j) => c.classList.toggle('sel', j === i));
    openDetail('inv-1047');
  });
});

// ═══ River Drawing ═══
function drawRiver() {
  const canvas = document.getElementById('riverCanvas');
  if (!canvas || !canvas.offsetWidth) return;
  const ctx = canvas.getContext('2d');
  const dpr = window.devicePixelRatio || 1;
  canvas.width = canvas.offsetWidth * dpr;
  canvas.height = canvas.offsetHeight * dpr;
  ctx.scale(dpr, dpr);
  const w = canvas.offsetWidth, h = canvas.offsetHeight, mid = h * 0.5;

  const pts = [
    {x:0,t:-32,b:32},{x:.08,t:-30,b:30},{x:.18,t:-38,b:38},{x:.28,t:-28,b:28},
    {x:.35,t:-32,b:32},{x:.42,t:-34,b:34},{x:.5,t:-26,b:26},{x:.58,t:-40,b:40},
    {x:.68,t:-36,b:36},{x:.78,t:-30,b:30},{x:.88,t:-36,b:36},{x:1,t:-42,b:42}
  ];

  function getY(xNorm, side) {
    for (let i = 0; i < pts.length - 1; i++) {
      if (xNorm >= pts[i].x && xNorm <= pts[i+1].x) {
        const t = (xNorm - pts[i].x) / (pts[i+1].x - pts[i].x);
        const s = t * t * (3 - 2 * t); // smoothstep
        const val = side === 't' ? pts[i].t + (pts[i+1].t - pts[i].t) * s : pts[i].b + (pts[i+1].b - pts[i].b) * s;
        return mid + val;
      }
    }
    return mid;
  }

  // Fill
  ctx.beginPath();
  for (let x = 0; x <= w; x += 2) { const nx = x / w; ctx.lineTo(x, getY(nx, 't')); }
  for (let x = w; x >= 0; x -= 2) { const nx = x / w; ctx.lineTo(x, getY(nx, 'b')); }
  ctx.closePath();
  const grd = ctx.createLinearGradient(0, mid - 45, 0, mid + 45);
  grd.addColorStop(0, 'rgba(79,209,197,.1)');
  grd.addColorStop(.5, 'rgba(79,209,197,.04)');
  grd.addColorStop(1, 'rgba(79,209,197,.1)');
  ctx.fillStyle = grd;
  ctx.fill();

  // Edges
  [['t','rgba(79,209,197,.28)',1.5],['b','rgba(79,209,197,.12)',1]].forEach(([side,col,lw]) => {
    ctx.beginPath();
    for (let x = 0; x <= w; x += 2) ctx.lineTo(x, getY(x/w, side));
    ctx.strokeStyle = col; ctx.lineWidth = lw; ctx.stroke();
  });

  // Streams
  const incomes = [{x:.18,amt:'$8,400'},{x:.58,amt:'$12,400'},{x:.82,amt:'$6,800'}];
  incomes.forEach(s => {
    const px = s.x * w, ry = getY(s.x, 't');
    ctx.beginPath(); ctx.moveTo(px, 10); ctx.quadraticCurveTo(px + 3, (10 + ry) / 2, px, ry);
    ctx.strokeStyle = 'rgba(104,211,145,.22)'; ctx.lineWidth = 2; ctx.stroke();
    const g = ctx.createRadialGradient(px, ry, 0, px, ry, 10);
    g.addColorStop(0,'rgba(104,211,145,.18)'); g.addColorStop(1,'transparent');
    ctx.fillStyle = g; ctx.beginPath(); ctx.arc(px, ry, 10, 0, Math.PI*2); ctx.fill();
    ctx.font = '500 9px Manrope'; ctx.fillStyle = 'rgba(104,211,145,.55)'; ctx.textAlign = 'center'; ctx.fillText(s.amt, px, 8);
  });

  const expenses = [{x:.28,amt:'$2,100'},{x:.48,amt:'$3,200'},{x:.72,amt:'$1,800'}];
  expenses.forEach(s => {
    const px = s.x * w, ry = getY(s.x, 'b');
    ctx.beginPath(); ctx.moveTo(px, ry); ctx.quadraticCurveTo(px - 3, (ry + h - 10) / 2, px, h - 10);
    ctx.strokeStyle = 'rgba(246,173,85,.18)'; ctx.lineWidth = 2; ctx.stroke();
    const g = ctx.createRadialGradient(px, ry, 0, px, ry, 10);
    g.addColorStop(0,'rgba(246,173,85,.14)'); g.addColorStop(1,'transparent');
    ctx.fillStyle = g; ctx.beginPath(); ctx.arc(px, ry, 10, 0, Math.PI*2); ctx.fill();
    ctx.font = '500 9px Manrope'; ctx.fillStyle = 'rgba(246,173,85,.45)'; ctx.textAlign = 'center'; ctx.fillText(s.amt, px, h - 3);
  });
}

// River hover tooltip
const riverWrap = document.getElementById('riverWrap');
const riverTip = document.getElementById('riverTip');
if (riverWrap) {
  riverWrap.addEventListener('mousemove', (e) => {
    const rect = riverWrap.getBoundingClientRect();
    const x = e.clientX - rect.left;
    const pct = x / rect.width;
    // Simulate cash balance
    const balances = [42000,40200,44800,38600,41200,43500,39200,47200,44800,41600,44200,49400];
    const idx = Math.min(Math.floor(pct * (balances.length - 1)), balances.length - 2);
    const t = (pct * (balances.length - 1)) - idx;
    const val = Math.round(balances[idx] + (balances[idx+1] - balances[idx]) * t);
    const formatted = '$' + val.toLocaleString();

    riverTip.querySelector('.tt-amt').textContent = formatted;
    const dateOffset = Math.round(pct * 60);
    const d = new Date(2026, 0, 15 + dateOffset);
    riverTip.querySelector('.tt-label').textContent = d.toLocaleDateString('en-US', {month:'short',day:'numeric'});

    riverTip.style.left = Math.min(x + 12, rect.width - 120) + 'px';
    riverTip.style.top = (e.clientY - rect.top - 50) + 'px';
    riverTip.classList.add('show');
  });
  riverWrap.addEventListener('mouseleave', () => riverTip.classList.remove('show'));
}

// ═══ Init ═══
window.addEventListener('load', () => {
  drawRiver();
  window.addEventListener('resize', drawRiver);

  // Greeting time
  const hour = new Date().getHours();
  const timeStr = hour < 12 ? 'Good morning' : hour < 17 ? 'Good afternoon' : 'Good evening';
  const greetEl = document.querySelector('#view-overview .greeting');
  if (greetEl) greetEl.innerHTML = `${timeStr}, <strong>Sunny</strong>`;
});
</script>
</body>
</html>